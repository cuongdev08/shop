"use strict";window.theme=window.theme||{},function(t){theme.initTimeline=function(o){var i=theme.$(o),e=i.closest(".alpha-popup-content"),n=e[0],s=n?e:t(window),l=n?s.offset().top-t(window).scrollTop():0,f=i.find(".timeline-line"),c=f.find(".timeline-progress"),p=i.find(".timeline-item"),a=i.find(".timeline-point"),r=s.scrollTop(),h=-1,d=s.height(),w=s.outerHeight(),m=!1;function u(){m=!1,i.hasClass("timeline-v-align-top")?f.css({bottom:i.offset().top+i.outerHeight()-p.last().find(a).offset().top,height:"auto"}):i.hasClass("timeline-v-align-bottom")&&f.css({top:p.first().find(a).offset().top-p.first().offset().top,bottom:0,height:"auto"}),h!==r&&(h=r,d,function(){var o=n?c.offset().top+r-l-t(window).scrollTop():c.offset().top,i=r-o+.6*w,e=n?o+f.outerHeight()+r-l-t(window).scrollTop():o+f.outerHeight();e<=r+.6*w&&(i=e-o);c.css({height:i+"px"}),p.each((function(){var o=t(this).find(a).offset().top;(o=n?o+r-l-t(window).scrollTop():o)<r+.6*w?t(this).addClass("active"):t(this).removeClass("active")}))}())}function v(){m||requestAnimationFrame(u),m=!0}v(),window.addEventListener("scroll",(function(){r=s.scrollTop(),l=n?s.offset().top-t(window).scrollTop():0,v()}),{passive:!0}),window.addEventListener("resize",(function(){r=s.scrollTop(),d=s.height(),l=n?s.offset().top-t(window).scrollTop():0,v()}),{passive:!0})},t(window).on("alpha_complete",(function(){t(".timeline-vertical").each((function(){theme.initTimeline(this)}))}))}(jQuery);