"use strict";window.theme||(window.theme={}),function(t){t(window).on("alpha_complete",(function(){var a,e,i,r,d={enable:alpha_fbt_vars.fbt_discount_enable,type:alpha_fbt_vars.fbt_discount_type,fixed:alpha_fbt_vars.fbt_discount_fixed,percent:alpha_fbt_vars.fbt_discount_percentage,condition:alpha_fbt_vars.fbt_discount_condition,spend:alpha_fbt_vars.fbt_discount_spend,productCount:alpha_fbt_vars.fbt_discount_products_count},o=t(".product-fbt").eq(0),c=o.find(".alpha-data-oldprice");function n(t){var a=d.type,e=0;return 0==t?0:(a&&(e="fixed"==a?t>parseFloat(d.fixed)?parseFloat(t-parseFloat(d.fixed)):t:parseFloat(t-t*parseInt(d.percent)/100)),e)}function p(t,a){if("yes"!=d.condition)return!0;var e=parseFloat(d.spend),i=parseInt(d.productCount);return!(e>0&&i>0&&e>t||i>a)}a=0,e=0,i=0,r=o.find(".alpha_old_price"),o.find(".product-wrap").each((function(){var e=t(this).find('input[type="checkbox"]'),r=parseFloat(e.data("price"));e.is(":checked")&&(a+=r,i+=1)})),e=n(parseFloat(a)),o.find(".bought-count span").text(parseInt(i)),p(a,i)?r.show():(r.hide(),e=a),e&&a?(r.find(".woocommerce-Price-amount").html("<bdi>"+(r.find(".woocommerce-Price-currencySymbol").length?r.find(".woocommerce-Price-currencySymbol").get(0).outerHTML:"")+a.toFixed(2)+"</bdi>"),o.find(".alpha-data-oldprice").data("price",a.toFixed(2)).attr("data-price",a.toFixed(2)),o.find(".alpha_total_price .woocommerce-Price-amount").html("<bdi>"+(o.find(".alpha_total_price .woocommerce-Price-currencySymbol").length?o.find(".alpha_total_price .woocommerce-Price-currencySymbol").get(0).outerHTML:"")+e.toFixed(2)+"</bdi>"),o.find(".alpha-data-price").data("price",e.toFixed(2)).attr("data-price",e.toFixed(2))):(o.find(".alpha_total_price .woocommerce-Price-amount").html("<bdi>"+(o.find(".alpha_total_price .woocommerce-Price-currencySymbol").length?o.find(".alpha_total_price .woocommerce-Price-currencySymbol").get(0).outerHTML:"")+e.toFixed(2)+"</bdi>"),o.find(".alpha-data-price").data("price",e.toFixed(2)).attr("data-price",e.toFixed(2))),theme.$body.on("change",".product-fbt input",(function(a){var e=t(a.currentTarget).closest(".product-fbt"),i=e.find(".bought-count span"),r=c.length?parseFloat(e.find(".alpha-data-oldprice").data("price")):0,d=parseFloat(e.find(".alpha-data-price").data("price")),o=parseFloat(e.find(".alpha-data-price").data("price")),l=t(this),f=l.data("price")?parseFloat(l.data("price")):0;c.length&&(o=r),a.preventDefault(),l.is(":checked")?(l.closest(".product").removeClass("inactive"),o+=f,i.text(parseInt(i.text())+1)):(l.closest(".product").addClass("inactive"),o-=f,i.text(parseInt(i.text())-1));var h="";e.find("input").each((function(){t(this).is(":checked")&&(h+=(h?",":"")+t(this).data("id"))})),0==o&&(d=0),c.length?(d=n(o),e.find(".alpha_old_price .woocommerce-Price-amount").html("<bdi>"+e.find(".alpha_old_price .woocommerce-Price-currencySymbol").get(0).outerHTML+o.toFixed(2)+"</bdi>"),e.find(".alpha-data-oldprice").data("price",o.toFixed(2)).attr("data-price",o.toFixed(2))):d=o,p(o,parseInt(i.text()))?e.find(".alpha_old_price").show():(e.find(".alpha_old_price").hide(),d=o),e.find(".alpha_add_to_cart_button").attr("value",h),e.find(".alpha_total_price .woocommerce-Price-amount").html("<bdi>"+e.find(".alpha_total_price .woocommerce-Price-currencySymbol").get(0).outerHTML+d.toFixed(2)+"</bdi>"),e.find(".alpha-data-price").data("price",d.toFixed(2)).attr("data-price",d.toFixed(2))})).on("found_variation",".variations_form",(function(a,e){if(t(".product-fbt").length&&e.is_in_stock){var i=e.display_price,r=e.variation_id,d=e.image,o=t(".current-product"),l=o.find(".woocommerce-Price-currencySymbol").get(0).outerHTML,f=t(".product-fbt"),h=f.find(".bought-count span"),u=c.length?parseFloat(f.find(".alpha-data-oldprice").data("price")):0,_=parseFloat(f.find(".alpha-data-price").data("price")),s=parseFloat(f.find(".alpha-data-price").data("price")),m=f.find(".alpha_add_to_cart_button").attr("value");c.length&&(s=u),o.hasClass("disabled")?(h.text(parseInt(h.text())+1),o.attr("data-content",o.get(0).outerHTML)):(s-=o.find(".price").data("price"),m=(m=m.split(",")).filter((function(t){return t!=""+o.data("id")})).join(",")),m=m+(m?",":"")+r,0==(s+=i)&&(_=0),c.length?(_=n(s),f.find(".alpha_old_price .woocommerce-Price-amount").html("<bdi>"+l+s.toFixed(2)+"</bdi>"),f.find(".alpha-data-oldprice").data("price",s.toFixed(2))):_=s,p(s,parseInt(h.text()))?f.find(".alpha_old_price").show():(f.find(".alpha_old_price").hide(),_=s),f.find(".alpha_add_to_cart_button").attr("value",m),f.find(".alpha_total_price .woocommerce-Price-amount").html("<bdi>"+l+_.toFixed(2)+"</bdi>"),f.find(".alpha-data-price").data("price",_.toFixed(2)),o.removeClass("disabled"),o.find("input").prop("checked",!0).data("price",i),o.find(".price").get(0).outerHTML='<div class="price" data-price="'+i+'">'+l+i,o.data("id",r),o.find("img").attr("src")!=d.src&&o.find("img").attr("src",d.src).attr("alt",d.alt).attr("width",d.width).attr("height",d.height)}})).on("reset_data",".variations_form",(function(a){if(t(".product-fbt").length){var e=t(".current-product");if(e.attr("data-content")){var i=t(".product-fbt"),r=i.find(".bought-count span"),d=c.length?parseFloat(i.find(".alpha-data-oldprice").data("price")):0,o=parseFloat(i.find(".alpha-data-price").data("price")),l=parseFloat(i.find(".alpha-data-price").data("price")),f=parseFloat(e.find(".price").data("price")),h=i.find(".alpha_add_to_cart_button").attr("value"),u=e.find(".woocommerce-Price-currencySymbol").get(0).outerHTML;if(c.length&&(l=d),e.find("input").is(":checked"))l-=f,h=(h=h.split(",")).filter((function(t){return t!=""+e.data("id")})).join(","),0==l&&(o=0),c.length?(o=n(l),i.find(".alpha_old_price .woocommerce-Price-amount").html("<bdi>"+u+l.toFixed(2)+"</bdi>"),i.find(".alpha-data-oldprice").data("price",l.toFixed(2))):o=l,p(l,parseInt(r.text()))?i.find(".alpha_old_price").show():(i.find(".alpha_old_price").hide(),o=l),i.find(".alpha_add_to_cart_button").attr("value",h),i.find(".alpha_total_price .woocommerce-Price-amount").html("<bdi>"+u+o.toFixed(2)+"</bdi>"),i.find(".alpha-data-price").data("price",o.toFixed(2)),(r=i.find(".bought-count span")).text(parseInt(r.text())-1);e.get(0).outerHTML=e.attr("data-content")}}}))}))}(jQuery);