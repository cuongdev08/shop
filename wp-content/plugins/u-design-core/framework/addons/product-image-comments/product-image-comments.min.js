window.theme||(window.theme={}),function(e){var i={init:function(){e("form.comment-form").attr("enctype","multipart/form-data"),e("body").on("change",'.comment-form .review-form-section input[type="file"]',i.uploadMedia).on("click",".comment-form .review-form-section .btn-remove",i.removeMedia).on("click",".review-images img",i.openLightBox).on("click",".review-images video",i.openVideoPopup)},uploadMedia:function(i){if(e(this)[0].files.length){var t=e(this),o=e(this)[0].files[0],n=(new FileReader,t.closest(".file-input"));if(o.size>alpha_product_image_comments.max_size)return t.val(""),void alert(alpha_product_image_comments.error_msg.size_error);if(e.inArray(o.type,alpha_product_image_comments.mime_types)<0)return t.val(""),void alert(alpha_product_image_comments.error_msg.mime_type_error);var r=(window.URL||window.webkitURL).createObjectURL(o);r&&(n.hasClass("image-input")?n.find(".file-input-wrapper").css({"background-image":"url("+r+")","background-color":"#fff"}):n.hasClass("video-input")&&n.find("video").attr("src",r))}},removeMedia:function(i){var t=e(this).closest(".file-input");t.removeClass("invalid-media"),t.find('input[type="file"]').val(""),t.find(".file-input-wrapper").css({"background-image":"","background-color":""}),t.find("video").attr("src","")},openLightBox:function(i){i.preventDefault();var t=e(i.currentTarget),o=t.parent().children().map((function(){return{src:this.getAttribute("data-img-src"),w:this.getAttribute("data-img-width"),h:this.getAttribute("data-img-height"),title:this.getAttribute("alt")||""}})).get();if("undefined"!=typeof PhotoSwipe){var n=e(".pswp")[0],r=new PhotoSwipe(n,PhotoSwipeUI_Default,o,{index:t.index(),closeOnScroll:!1});r.listen("afterInit",(function(){r.shout("initialZoomInEnd")})),r.init()}},openVideoPopup:function(i){i.preventDefault(),theme.popup({items:{src:'<video src="'+e(this).attr("src")+'" autoplay loop controls>',type:"inline"},mainClass:"mfp-video-popup"},"video")}};theme.CommentWithImage=i,theme.$window.on("alpha_complete",(function(){theme.CommentWithImage.init()}))}(jQuery);