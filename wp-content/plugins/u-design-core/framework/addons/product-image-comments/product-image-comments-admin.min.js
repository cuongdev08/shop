!function(e,a){"use strict";var t,i;window.themeAdmin=window.themeAdmin||{};var n={init:function(){this.onAddImage=this.onAddImage.bind(this),this.onRemoveImage=this.onRemoveImage.bind(this),this.onSelectImage=this.onSelectImage.bind(this),a(document.body).on("click","#alpha-comment-images-metabox .button-image-upload",this.onAddImage).on("click","#alpha-comment-images-metabox .button-image-remove",this.onRemoveImage)},onSelectImage:function(){var e=t.state().get("selection"),n=a(".alpha-comment-img-preview-area"),m=i.siblings("input"),o=[m.eq(0).val(),m.eq(1).val()];t.close(),e.map((function(e){if((e=e.toJSON()).id){var a=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;"image"===e.type?o[0]=o[0]?o[0]+","+e.id:e.id:o[1]=o[1]?o[1]+","+e.id:e.id,"image"===e.type?n.append('<div class="comment-img-wrapper" data-attachment_id="'+e.id+'"><img src="'+a+'"><a href="#" class="button-image-remove"><span class="dashicons dashicons-dismiss"></span></a></div>'):n.append('<div class="comment-img-wrapper" data-attachment_id="'+e.id+'" data-type="video"><a href="'+e.url+'" traget="__blank"><figure><video src="'+e.url+'" preload="metadata"></video></figure></a><a href="#" class="button-image-remove"><span class="dashicons dashicons-dismiss"></span></a></div>')}})),m.eq(0).val(o[0]).trigger("change"),m.eq(1).val(o[1]).trigger("change")},onAddImage:function(n){n.preventDefault(),i=a(n.currentTarget),t||(t=e.media.frames.downloadable_file=e.media({title:"Choose an image",button:{text:"Use image"},multiple:!0})).on("select",this.onSelectImage),t.open(),this.requireSave()},onRemoveImage:function(e){var t=a(e.currentTarget),i=a("#alpha-comment-images-metabox input"),n=a(".alpha-comment-img-preview-area");t.parent().remove();var m=["",""];n.find("div.comment-img-wrapper").each((function(){var e=a(this).data("attachment_id");"video"!==a(this).data("type")?m[0]=m[0]?m[0]+","+e:e:m[1]=m[1]?m[1]+","+e:e})),i.eq(0).val(m[0]).trigger("change"),i.eq(1).val(m[1]).trigger("change"),e.preventDefault()}};themeAdmin.commentImage=n,a(document).ready((function(){themeAdmin.commentImage.init()}))}(wp,jQuery);