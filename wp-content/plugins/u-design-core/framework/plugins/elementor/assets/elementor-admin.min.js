jQuery(document).ready((function(e){"use strict";var t={init:function(){if(this.initCustomCSS(),this.initCustomJS(),this.addStudioButtons(),this.initArchiveSinglePreview(),this.initTooltip(),this.repeaterPopup(),elementor.hooks.addFilter("panel/elements/regionViews",(function(e){var t=e.categories.options.collection,o=t.findIndex({name:"basic"});return-1===t.findIndex({name:"alpha-notice"})&&o&&t.add({name:"alpha-notice",title:alpha_studio.texts.theme_display_name+wp.i18n.__(" Library","alpha-core"),defaultActive:1,promotion:null,items:[]},{at:o-1}),e})),"undefined"!=typeof Marionette&&Marionette.ItemView&&Marionette.Behavior){class e extends Marionette.ItemView{className(){return"elementor-panel-category-items-alpha-notice"}getTemplate(){return"#tmpl-alpha-elementor-studio-notice"}}class t extends Marionette.Behavior{initialize(){"alpha-notice"==this.view.options.model.get("name")&&(this.view.emptyView=e)}}elementor.hooks.addFilter("panel/category/behaviors",(function(e){return Object.assign({},e,{studioNotice:{behaviorClass:t}})}))}elementor.on("panel:init",(function(){elementor.panel.currentView.on("set:page",t.panelChange),elementor.channels.editor.on("section:activated",t.changeControls)})),"undefined"!=typeof $e&&($e.commands.on("run:before",(function(e,t,o){"document/elements/delete"==t&&o&&o.containers&&o.containers.length&&o.containers.forEach((function(e){elementorFrontend.hooks.doAction("alpha_elementor_element_before_delete",e.model)}))})),$e.commands.on("run:after",(function(e,t,o){"document/elements/create"==t&&o&&o.model&&o.model.id&&elementorFrontend.hooks.doAction("alpha_elementor_element_after_add",o.model)})),e(document.body).on("click","#elementor-panel-saver-button-publish:not(.elementor-disabled)",(function(t){alpha_core_vars.layout_save&&(e("#alpha-elementor-panel-alpha-studio").trigger("click"),e('.blocks-section-switch [href="#layout-section"]').trigger("click"))})));var o=elementor.getPreferences;elementor.getPreferences=function(e){return"edit_buttons"==e?"yes":o(e)},elementor.hooks.addFilter("elements/edit-buttons",(function(e){var t=e.edit.title;return e.editStyle={title:t+" Style",icon:"adjust"},e.editAnim={title:t+" Animation",icon:"flash"},e.addon={title:t+" Addon",icon:"cogs"},e}))},initLayoutColumns:function(){var t=e(".elementor-control-background_background.elementor-control-type-choose.elementor-group-control.elementor-label-inline");t.length>0&&4==t.find(".elementor-choices label").length&&t.removeClass("elementor-label-inline").addClass("elementor-label-block");var o=e(".elementor-group-control-image-size.elementor-label-inline");o.length>0&&o.removeClass("elementor-label-inline").addClass("elementor-label-block")},repeaterPopup:function(){e(document.body).on("mouseup",".elementor-repeater-row-item-title",(function(){var t=e(this),o=t.parent().siblings(".elementor-repeater-row-controls");o.removeClass("editable-effect"),window.innerHeight>t.offset().top+546?o.css({top:t.offset().top+"px",bottom:""}):o.css({bottom:"46px",top:""}),0==t.closest(".elementor-repeater-fields-wrapper").find(".editable").length&&o.addClass("editable-effect")})).on("click",(function(t){0!=e(t.target).closest(".elementor-repeater-fields").length||0!=e(t.target).closest(".pcr-app").length||e(t.target).hasClass("select2-search__field")||e(".elementor-repeater-row-controls.editable").removeClass("editable editable-effect")}))},initTooltip:function(){e(document).on("mouseover",".elementor-control .elementor-control-input-wrapper",(function(){var t=e(this),o=t.parent().siblings(".elementor-control-field-description");0==o.length&&(o=t.siblings(".elementor-control-field-description")),o.addClass("show"),(t.closest(".elementor-label-block").length||t.closest(".elementor-control-type-image_choose").length)&&o.addClass("block-pos");var n=t.closest(".elementor-control").get(0);t.closest(".elementor-repeater-row-controls").length&&n.offsetTop+n.offsetHeight+o.outerHeight()>=490&&o.addClass("show-top")})).on("mouseout",".elementor-control .elementor-control-input-wrapper",(function(t){var o=e(this),n=o.parent().siblings(".elementor-control-field-description");0==n.length&&(n=o.siblings(".elementor-control-field-description")),e(t.relatedTarget).hasClass("elementor-control-field-description show")||n.removeClass("show block-pos show-top")})).on("mouseout",".elementor-control .elementor-control-field-description.show",(function(t){e(this).removeClass("show block-pos show-top")}))},initCustomCSS:function(){var t=elementor.settings.page.model.get("page_css");setTimeout((function(){void 0!==t&&elementorFrontend.hooks.doAction("refresh_page_css",t)}),2e3),e(document.body).on("input",'textarea[data-setting="page_css"]',(function(t){e(this).closest(".elementor-control").siblings(".elementor-control-_alpha_custom_css").length&&(elementor.settings.page.model.set("page_css",e(this).val()),e("#elementor-panel-saver-button-publish").removeClass("elementor-disabled"),e("#elementor-panel-saver-button-save-options").removeClass("elementor-disabled")),elementorFrontend.hooks.doAction("refresh_page_css",e(this).val())}))},initCustomJS:function(){elementor.settings.page.model.get("page_js");e(document.body).on("input",'textarea[data-setting="page_js"]',(function(t){e(this).closest(".elementor-control").siblings(".elementor-control-_alpha_custom_js").length&&(elementor.settings.page.model.set("page_js",e(this).val()),e("#elementor-panel-saver-button-publish").removeClass("elementor-disabled"),e("#elementor-panel-saver-button-save-options").removeClass("elementor-disabled"))}))},addStudioButtons:function(){var e=document.getElementById("tmpl-elementor-add-section");e&&(e.textContent=e.textContent.replace('<div class="elementor-add-section-area-button elementor-add-template-button','<div class="elementor-add-section-area-button elementor-studio-section-button" onclick="window.parent.runStudio(this);" title="Alpha Studio"><i class="alpha-mini-logo"></i><i class="eicon-insert"></i></div>\r\n<div class="elementor-add-section-area-button elementor-add-template-button'))},panelChange:function(o){if("_alpha_section_custom_css"==o.activeSection||"_alpha_section_custom_js"==o.activeSection){var n=o.activeSection.replaceAll("_section",""),l=n.replaceAll("_alpha_custom","page");if(e(".elementor-control-"+l).length)return;var i=e(".elementor-control-"+n).clone().removeClass("elementor-control-"+n).addClass("elementor-control-"+l);i.insertAfter(e(".elementor-control-"+n)),i.find("textarea").attr("data-setting",l).val(elementor.settings.page.model.get(l)),"page_css"==l?e(".elementor-control-page_js").remove():e(".elementor-control-page_css").remove()}else"alpha_custom_css_settings"==o.activeSection?e(".elementor-control-page_css").val(elementor.settings.page.model.get("page_css")):"alpha_custom_js_settings"==o.activeSection&&e(".elementor-control-page_js").val(elementor.settings.page.model.get("page_js"));t.initLayoutColumns()},changeControls:function(o,n){if("_alpha_section_custom_css"!=o&&"_alpha_section_custom_js"!=o)e(".elementor-control-page_css, .elementor-control-page_js").remove();else{var l=o.replaceAll("_section",""),i=l.replaceAll("_alpha_custom","page"),r=e(".elementor-control-"+l).clone().removeClass("elementor-control-"+l).addClass("elementor-control-"+i);r.insertAfter(e(".elementor-control-"+l)),r.find("textarea").attr("data-setting",i).val(elementor.settings.page.model.get(i)),"page_css"==i?e(".elementor-control-page_js").remove():e(".elementor-control-page_css").remove()}t.initLayoutColumns(),t.initFlipboxWidget(o,n)},initFlipboxWidget:function(e,t){var o=t.getOption("editedElementView");if(alpha_core_vars.theme+"_widget_flipbox"===o.model.get("widgetType")){var n=-1!==["section_back_side_content","section_flipbox_back_style"].indexOf(e);o.$el.toggleClass("flipped",n);var l=o.$el.find(".flipbox_back");n&&l.css("transition","none"),n||setTimeout((function(){l.css("transition","")}),10)}},initArchiveSinglePreview:function(){e(document).on("click",".elementor-control-archive_preview_apply .elementor-button",(function(t){e.post(alpha_core_vars.ajax_url,{action:"alpha_archive_builder_preview_apply",nonce:alpha_core_vars.nonce,post_id:ElementorConfig.document.id,mode:e(".elementor-control-archive_preview_type select").val()},(function(){elementor.reloadPreview()}))})).on("click",".elementor-control-single_preview_apply .elementor-button",(function(t){e.post(alpha_core_vars.ajax_url,{action:"alpha_single_builder_preview_apply",nonce:alpha_core_vars.nonce,post_id:ElementorConfig.document.id,mode:e(".elementor-control-single_preview_type select").val()},(function(){elementor.reloadPreview()}))}))}};elementor.on("frontend:init",t.init.bind(t))}));